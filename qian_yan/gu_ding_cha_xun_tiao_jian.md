## 固定查询条件

### ****4.3.1、概述**** {#4-3-1}

固定查询条件可以对查询列表设置条件，然后查询列表会按照设置的条件显示数据。

### ****4.3.2、应用场景说明**** {#4-3-2}

当需要设置一个列表按条件显示数据时，可以通过固定查询条件来设置，比如说一个待验证缺陷列表，只需要查看fixed状态的缺陷，则通过设置固定查询条件，通过sql语句或者写Java代码设置固定查询条件缺陷状态为fixed的。

![E:\重要文件备份\ecology正式系统知识树图片(余海群提供)\20042\images\5647](../assets/ezhong_yao_wen_jian_bei_4efd5c_ecology_zheng_shi_xi_tong_zhi_shi_shu_tu_724728_yu_hai_qun_ti_4f9b295c_2.png)

**三、功能说明**

1、后端设置：通过在【后端应用中心】→【建模引擎】→【查询】在对应的查询列表中设置固定查询条件，如下图。

![E:\重要文件备份\ecology正式系统知识树图片(余海群提供)\20042\images\5646](../assets/ezhong_yao_wen_jian_bei_4efd5c_ecology_zheng_shi_xi_tong_zhi_shi_shu_tu_724728_yu_hai_qun_ti_4f9b295c_2.png)

说明：

可以通过sql或者java代码写固定查询条件：

1）sql：勾选sql时，通过在方框中输入sql查询条件。

2）java：勾选java时，可以通过编写一段java代码返回查询条件。

3）写条件时主表别名为t1，明细表别名为d1。

4）设置固定查询提交时，要以数据库中存的值进行编写，如选择框是0、1、2...，浏览框是写id值。

2、设置固定查询条件后，预览查询表单或者前台查看查询列表时，默认按设置的固定查询条件显示数据。如下图。

![E:\重要文件备份\ecology正式系统知识树图片(余海群提供)\20042\images\5647](../assets/ezhong_yao_wen_jian_bei_4efd5c_ecology_zheng_shi_xi_tong_zhi_shi_shu_tu_724728_yu_hai_qun_ti_4f9b295c_2.png)

**四、实施注意**

1、在写固定查询条件时，要按照参考数据库中存的值写。

2、当对应表单存在明细表时，可以将明细表字段设置为固定查询条件，需选择一个子表，且无论选择哪个子表，别名均为d1，如果是主表字段，则别名为t1。

3、固定查询条件支持变量参数如当前用户当前日期等 具体如下

//  当前操作者 $UserId$

//  当前操作者部门$DepartmentId$

//  当前操作者部门（包含下级部门）$AllDepartmentId$

//  当前操作者分部$SubcompanyId$

//  当前操作者分部（包含下级分部）$AllSubcompanyId$

//  当前日期$date$

4、固定查询条件支持传参，格式为and t1.col1=PARM(type)（字符串类型的字段需要加单引号&#039;），可以用于url中加“&amp;type=1”的方式用于其他地方调用。