## 流程转数据

### ****2.11.1、概述**** {#2-11-1}

流程转数据是通过实现将流程中的数据转到表单建模的模块数据中，实现流程与表单建模数据的流转。

### ****2.11.2、应用场景说明**** {#2-11-2}

当一个流程中的数据与模块中的数据有对应关系，可以通过在模块的流程转数据功能中设置流程审批完成后，将数据添加到模块中。

例如在完成一个图书入库审批后，可以将入库表中相关的图书信息转到模块中，入库审批中的图书信息则会显示到模块中。效果如下图。

**![E:\重要文件备份\ecology正式系统知识树图片(余海群提供)\20042\images\1092510](../assets/ezhong_yao_wen_jian_bei_4efd5c_ecology_zheng_shi_xi_tong_zhi_shi_shu_tu_724728_yu_hai_qun_ti_4f9b295c_2.png)**

### ****2.11.3、功能说明**** {#2-11-3}

1、通过在【后端应用中心】→【建模引擎】→【模块】找到需要设置流程转数据的模块，在流程转数据tab，通过新建创建流程转数据设置，或者通过详细设置链接修改已有的流程转数据设置。如下图。

![E:\重要文件备份\ecology正式系统知识树图片(余海群提供)\20042\images\1092511](../assets/ezhong_yao_wen_jian_bei_4efd5c_ecology_zheng_shi_xi_tong_zhi_shi_shu_tu_724728_yu_hai_qun_ti_4f9b295c_2.png)

说明：

1）列表中会显示设置的所有流程转数据设置列表及相关信息。

2）新建：可以创建新的流程转数据设置。

2、详细设置如下图：

![E:\重要文件备份\ecology正式系统知识树图片(余海群提供)\20042\images\1092515](../assets/ezhong_yao_wen_jian_bei_4efd5c_ecology_zheng_shi_xi_tong_zhi_shi_shu_tu_724728_yu_hai_qun_ti_4f9b295c_2.png)

说明：

1）是否启用：设置是否启用当前流程转数据设置。

2）流程类型：选择要转模块数据的流程。

3）触发表单：选择要触发流程转模块数据的是主表表单还是明细表表单。

①选择主表：选择主表时，是将流程表单中主表中的数据转到模块主表，明细表转到明细表。

②选择明细表：可以选择流程表单中存在的明细表，如明细1、明细2等。选择指定明细表时，是将流程中主表+明细表表到数据转到模块表单的主表中。

4）模块：要触发流程转数据对应的模块，新建是会默认当前模块，修改模块后，对应的流程转数据会显示在对应模块的流程转数据设置列表中。

5）触发节点：选择要触发流程转数据的流程节点，保存后触发节点会加载流程中的节点到列表中。

6）触发时间：可以选择要触发流程转数据的时机是离开几点还是到达节点。

7）模块创建人：设置流程转数据后，模块对应的创建人。

流程当前操作人：设置流程的当前操作人作为触发的模块数据的创建人。

流程创建人：设置流程的创建人作为触发的模块数据的创建人。

流程人力资源相关字段：设置流程表单中相关的人力资源字段中的人员座位模块数据的创建人。

8）模块主表字段映射：设置模块表单字段与流程表单字段的映射关系。

①当触发表单是主表时，模块主表可以选择流程的主表字段进行映射；模块明细表字段可以选择流程的明细表字段进行映射，模块一个明细表只能与一个流程的明细表进行映射。

②当触发表单是明细表时，模块主表可以选择流程的主表字段和选择的明细表对应的字段进行映射，不能设置模块明细表字段的映射。

3、设置完成后，在前台新建流程后，在设置触发节点的触发时间会按照映射关系将流程数据转为模块数据显示在模块数据列表中。如下图。

![E:\重要文件备份\ecology正式系统知识树图片(余海群提供)\20042\images\1092516](../assets/ezhong_yao_wen_jian_bei_4efd5c_ecology_zheng_shi_xi_tong_zhi_shi_shu_tu_724728_yu_hai_qun_ti_4f9b295c_2.png)

### ****2.11.4、实施注意**** {#2-11-4}

1、可以选择主表或者明细表为触发表单。

2、设置模块表单字段与明细表单字段的映射关系时，模块表单字段与流程表单字段的类型要一致，否则会触发不成功。

3、选择明细表为触发表单时，此时是将流程主表+明细表字段相关信息转为模块数据，会按照明细表数据的条数进行触发，流程表单字段可以选择主表和选择的明细表对应的字段设置映射关系。

4、选择主表为触发表单时，模块明细表映射关系可以选择流程明细表字段进行设置，但是一个明细表对应一个明细表，如果设置了一个明细表的字段对应多个明细表中的字段时，由于不同的明细表数据条数不一样，可能会引起有的明细表字段转数据不成功的情况。

5、流程转数据操作需要确保接口WorkflowToMode存在，否则在流程转数据操作时会提示“下一节点操作错误”。